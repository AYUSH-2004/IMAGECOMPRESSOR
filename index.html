<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelShrink - Compress Images Instantly</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js"></script>
    
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', sans-serif; color: #f9fafb; overflow-x: hidden; }
        #particles-js { position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: 0; background-color: #1a202c; background-image: linear-gradient(to bottom right, #4f46e5, #111827); }
        .content-wrapper { position: relative; z-index: 1; }
        .drop-zone { border: 2px dashed #4b5563; transition: background-color 0.3s ease, border-color 0.3s ease, transform 0.3s ease; }
        .drop-zone.drag-over { background-color: rgba(79, 70, 229, 0.2); border-color: #6366f1; transform: scale(1.02); }
        .initial-hidden { opacity: 0; transform: translateY(20px); transition: opacity 0.6s cubic-bezier(0.25, 1, 0.5, 1), transform 0.6s cubic-bezier(0.25, 1, 0.5, 1); }
        .animate-in { opacity: 1; transform: translateY(0); }
        .list-item-enter { opacity: 0; transform: scale(0.95) translateY(10px); transition: opacity 0.4s ease, transform 0.4s ease; }
        .list-item-enter-active { opacity: 1; transform: scale(1) translateY(0); }
        .progress-bar-bg { background-color: #374151; border-radius: 999px; overflow: hidden; width: 100%; height: 8px; }
        .progress-bar-fill { background-color: #4f46e5; width: 0%; height: 100%; transition: width 0.3s ease-out; }
        .glass{ background: rgba(30, 41, 59, 0.4); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); transition: all 0.3s ease; box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1); }
        summary::-webkit-details-marker { display: none; }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <div id="particles-js"></div>
    <div class="content-wrapper flex-grow">
        <div class="relative">
    
            <div class="w-full max-w-5xl mx-auto px-4 py-6 md:py-8">
        
                <nav class="initial-hidden w-full flex items-center justify-between mb-10 p-4 rounded-full glass">
                    <a href="#" class="flex items-center gap-3">
                        <div class="w-9 h-9 bg-indigo-600 rounded-lg flex items-center justify-center flex-shrink-0 shadow-lg shadow-indigo-500/30">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </div>
                        <span class="text-2xl font-bold text-white tracking-tight">PixelShrink</span>
                    </a>
                    <div class="hidden md:flex items-center gap-x-2 text-sm font-medium">
                        <a href="#features" class="text-gray-300 hover:text-white transition-all duration-200 py-2 px-3 rounded-md hover:bg-white/10">Features</a>
                        <a href="#security" class="text-gray-300 hover:text-white transition-all duration-200 py-2 px-3 rounded-md hover:bg-white/10">Security</a>
                        <a href="#faq" class="text-gray-300 hover:text-white transition-all duration-200 py-2 px-3 rounded-md hover:bg-white/10">FAQ</a>
                        <a href="#contact" class="text-gray-300 hover:text-white transition-all duration-200 py-2 px-3 rounded-md hover:bg-white/10">Contact</a>
                    </div>
                </nav>

                <header class="text-center mb-12 initial-hidden">
                    <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-white tracking-tight">PixelShrink</h1>
                    <p class="mt-4 text-base sm:text-lg text-gray-300 max-w-2xl mx-auto">Compress your images instantly without losing quality. Support for all major formats with advanced compression algorithms.</p>
        
                    <div class="mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-6 max-w-3xl mx-auto">
                        <div class="card-item text-center p-4 rounded-2xl hover:scale-105 hover:shadow-xl glass">
                            <h3 class="font-semibold text-white">üîí Privacy First</h3>
                            <p class="text-sm text-gray-300">Images are processed in your browser. Nothing is ever uploaded.</p>
                        </div>
                        <div class="card-item text-center p-4 rounded-2xl hover:scale-105 hover:shadow-xl glass">
                            <h3 class="font-semibold text-white">‚ö° Lightning Fast</h3>
                            <p class="text-sm text-gray-300">No waiting for uploads or downloads from a server.</p>
                        </div>
                        <div class="card-item text-center p-4 rounded-2xl hover:scale-105 hover:shadow-xl glass">
                            <h3 class="font-semibold text-white">üñºÔ∏è All Formats</h3>
                            <p class="text-sm text-gray-300">Supports JPEG, PNG, WebP, GIF and more.</p>
                        </div>
                    </div>
                </header>

                <main class="initial-hidden rounded-2xl shadow-xl shadow-black/20 p-4 md:p-8 glass">
                    <div id="upload-container">
                        <div id="drop-zone" class="drop-zone w-full p-12 text-center rounded-xl cursor-pointer bg-slate-800/20 hover:bg-indigo-900/20">
                            <input type="file" id="file-input" class="hidden" accept="image/*" multiple>
                            <div class="flex flex-col items-center justify-center text-gray-400 pointer-events-none">
                                <div class="flex items-center justify-center w-16 h-16 mb-4 bg-indigo-500/20 rounded-full border border-indigo-400/30">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                                    </svg>
                                </div>
                                <p class="text-xl font-semibold text-gray-200">Upload your images</p>
                                <p class="mt-1 text-sm">Drag and drop or click to select images</p>
                            </div>
                        </div>
                        <div id="error-message" class="hidden mt-4 bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-3 rounded-lg" role="alert"></div>
                    </div>

                    <div id="result-container" class="hidden">
                        <div class="flex flex-col sm:flex-row justify-between sm:items-center gap-4 mb-6">
                            <h2 class="text-2xl font-bold text-white">Compressed Files</h2>
                            <div class="flex flex-col sm:flex-row gap-2">
                                <button id="download-all-btn" class="w-full sm:w-auto justify-center bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition-all duration-200 transform hover:scale-105 active:scale-100 disabled:opacity-50 disabled:scale-100" disabled>Download All</button>
                                <button id="start-over-btn" class="w-full sm:w-auto justify-center bg-gray-600 hover:bg-gray-500 text-white font-bold py-2 px-4 rounded-lg transition-colors active:scale-95">Clear</button>
                            </div>
                        </div>
                        <div id="image-list" class="space-y-3">
                        </div>
                        <div class="mt-6 border-t border-white/10 pt-4">
                            <label for="file-input-add" class="cursor-pointer text-indigo-400 hover:text-indigo-300 font-semibold transition-colors">+ Add more files</label>
                            <input type="file" id="file-input-add" class="hidden" accept="image/*" multiple>
                        </div>
                    </div>
                </main>
        
                <section id="features" class="initial-hidden mt-16 md:mt-24">
                    <div class="text-center">
                        <h2 class="text-3xl font-extrabold text-white tracking-tight">Powerful Features</h2>
                        <p class="mt-2 max-w-2xl mx-auto text-lg text-gray-300">Everything you need for fast and private image compression.</p>
                    </div>
                    <div class="mt-12 grid gap-8 md:grid-cols-2 lg:grid-cols-3">
                        <div class="p-6 rounded-2xl glass hover:scale-105 hover:shadow-xl hover:shadow-black/20">
                            <h3 class="text-lg font-bold text-white">Batch Processing</h3>
                            <p class="mt-2 text-base text-gray-300">Compress multiple images at once. Just drag and drop a folder or select multiple files.</p>
                        </div>
                        <div class="p-6 rounded-2xl glass hover:scale-105 hover:shadow-xl hover:shadow-black/20">
                            <h3 class="text-lg font-bold text-white">Adjustable Quality</h3>
                            <p class="mt-2 text-base text-gray-300">Fine-tune the compression level to get the perfect balance between quality and file size.</p>
                        </div>
                        <div class="p-6 rounded-2xl glass hover:scale-105 hover:shadow-xl hover:shadow-black/20">
                            <h3 class="text-lg font-bold text-white">Offline Functionality</h3>
                            <p class="mt-2 text-base text-gray-300">PixelShrink works even when you're offline. No internet connection is needed after the initial page load.</p>
                        </div>
                    </div>
                </section>

                <section id="security" class="initial-hidden mt-16 md:mt-24">
                    <div class="text-center">
                        <h2 class="text-3xl font-extrabold text-white tracking-tight">Your Privacy is Our Priority</h2>
                        <p class="mt-2 max-w-2xl mx-auto text-lg text-gray-300">We believe in a secure and private web. Here's our commitment to you.</p>
                    </div>
                    <div class="mt-12 grid gap-8 md:grid-cols-2">
                        <div class="p-6 rounded-2xl glass hover:scale-105 hover:shadow-xl hover:shadow-black/20 flex items-start gap-4">
                            <div class="flex-shrink-0 w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center border border-green-400/30">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008H12v-.008z" /></svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-white">Client-Side Processing</h3>
                                <p class="mt-1 text-base text-gray-300">All compression happens in your browser. Your files are never uploaded to any server, ensuring complete privacy.</p>
                            </div>
                        </div>
                         <div class="p-6 rounded-2xl glass hover:scale-105 hover:shadow-xl hover:shadow-black/20 flex items-start gap-4">
                            <div class="flex-shrink-0 w-12 h-12 bg-sky-500/20 rounded-lg flex items-center justify-center border border-sky-400/30">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-sky-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" /></svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-white">Zero Data Collection</h3>
                                <p class="mt-1 text-base text-gray-300">We don't require you to sign up or provide any personal data. No names, emails, or usage statistics are collected.</p>
                            </div>
                        </div>
                        <div class="p-6 rounded-2xl glass hover:scale-105 hover:shadow-xl hover:shadow-black/20 flex items-start gap-4">
                           <div class="flex-shrink-0 w-12 h-12 bg-rose-500/20 rounded-lg flex items-center justify-center border border-rose-400/30">
                               <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-rose-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" /></svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-white">Transparent & Open Source</h3>
                                <p class="mt-1 text-base text-gray-300">This tool is built using public, open-source libraries. The compression process is transparent and can be audited by anyone.</p>
                            </div>
                        </div>
                        <div class="p-6 rounded-2xl glass hover:scale-105 hover:shadow-xl hover:shadow-black/20 flex items-start gap-4">
                            <div class="flex-shrink-0 w-12 h-12 bg-amber-500/20 rounded-lg flex items-center justify-center border border-amber-400/30">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-amber-400" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" /></svg>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold text-white">Instant Deletion</h3>
                                <p class="mt-1 text-base text-gray-300">Your images are processed in your browser's memory. When you close the tab, all data is instantly and irrecoverably gone.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="faq" class="initial-hidden mt-16 md:mt-24">
                    <div class="text-center">
                        <h2 class="text-3xl font-extrabold text-white tracking-tight">Frequently Asked Questions</h2>
                        <p class="mt-2 max-w-2xl mx-auto text-lg text-gray-300">Have questions? We've got answers.</p>
                    </div>
                    <div class="mt-12 max-w-3xl mx-auto space-y-4">
                        <details class="p-6 rounded-2xl glass group">
                            <summary class="flex items-center justify-between font-bold text-white cursor-pointer">
                                How does this image compression work?
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 transition-transform duration-300 group-open:rotate-180">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                </svg>
                            </summary>
                            <p class="mt-4 text-gray-300">
                                This tool uses your browser's built-in power and a JavaScript library to intelligently re-encode your images. It reduces the quality in ways that are barely perceptible to the human eye, which results in a significantly smaller file size. No data is ever sent to a server.
                            </p>
                        </details>
                        <details class="p-6 rounded-2xl glass group">
                            <summary class="flex items-center justify-between font-bold text-white cursor-pointer">
                                Is it truly secure to use?
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 transition-transform duration-300 group-open:rotate-180">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                </svg>
                            </summary>
                            <p class="mt-4 text-gray-300">
                                Yes. Security is our main feature. The entire process happens on your computer (client-side). Your images never leave your device and are never uploaded or stored on any server. Once you close the browser tab, they are gone forever.
                            </p>
                        </details>
                        <details class="p-6 rounded-2xl glass group">
                            <summary class="flex items-center justify-between font-bold text-white cursor-pointer">
                                What is the maximum file size I can upload?
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 transition-transform duration-300 group-open:rotate-180">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                </svg>
                            </summary>
                            <p class="mt-4 text-gray-300">
                                There is no hard-coded limit. However, performance depends on your computer's memory and processing power. For very large images (e.g., over 30MB) or a huge number of files at once, your browser may slow down or become unresponsive. We recommend processing large batches in smaller chunks for the best experience.
                            </p>
                        </details>
                        <details class="p-6 rounded-2xl glass group">
                            <summary class="flex items-center justify-between font-bold text-white cursor-pointer">
                                Will New Features would be added to in future?
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 transition-transform duration-300 group-open:rotate-180">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                </svg>
                            </summary>
                            <p class="mt-4 text-gray-300">
                               Yes, we are continuously working to improve and add new features based on your suggestions. Feel free to share any recommendations or feedback using the contact form below!
                            </p>
                        </details>
                        <details class="p-6 rounded-2xl glass group">
                            <summary class="flex items-center justify-between font-bold text-white cursor-pointer">
                                Can I use PixelShrink on my phone?
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 transition-transform duration-300 group-open:rotate-180">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                </svg>
                            </summary>
                            <p class="mt-4 text-gray-300">
                                Absolutely. The website is fully responsive and works great on modern mobile browsers. You can easily select photos from your phone's gallery and compress them on the go before sharing.
                            </p>
                        </details>
                    </div>
                </section>

                <section id="contact" class="initial-hidden mt-16 md:mt-24">
                    <div class="text-center">
                        <h2 class="text-3xl font-extrabold text-white tracking-tight">Get in Touch</h2>
                        <p class="mt-2 max-w-2xl mx-auto text-lg text-gray-300">Have questions or feedback? We'd love to hear from you.</p>
                    </div>
                    <div class="mt-12 max-w-xl mx-auto p-8 rounded-2xl glass hover:shadow-xl hover:shadow-black/20">
                        <div id="form-notification" class="hidden"></div>
                        <form id="contact-form" action="https://submit-form.com/WrG64fGfd" class="grid grid-cols-1 gap-y-6">
                            <div>
                                <label for="name" class="sr-only">Full name</label>
                                <input type="text" name="name" id="name" autocomplete="name" required class="block w-full shadow-sm py-3 px-4 bg-gray-800/50 text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-400 border border-gray-600 rounded-md transition-shadow" placeholder="Full name">
                            </div>
                            <div>
                                <label for="email" class="sr-only">Email</label>
                                <input id="email" name="email" type="email" autocomplete="email" required class="block w-full shadow-sm py-3 px-4 bg-gray-800/50 text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-400 border border-gray-600 rounded-md transition-shadow" placeholder="Email">
                            </div>
                            <div>
                                <label for="message" class="sr-only">Message</label>
                                <textarea id="message" name="message" rows="4" required class="block w-full shadow-sm py-3 px-4 bg-gray-800/50 text-white placeholder-gray-400 focus:ring-2 focus:ring-indigo-400 border border-gray-600 rounded-md transition-shadow" placeholder="Message"></textarea>
                            </div>
                            <div>
                                <button type="submit" class="w-full justify-center py-3 px-6 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-indigo-500 transition-all transform hover:scale-105 active:scale-100">
                                Submit
                                </button>
                            </div>
                        </form>
                    </div>
                </section>
        
            </div>
        </div>
    </div>
    
   <footer class="w-full mt-16 md:mt-24 pb-8 initial-hidden">
    <div class="px-4">
        <div class="p-8 rounded-2xl glass hover:shadow-xl hover:shadow-black/20">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8 text-left max-w-7xl mx-auto border-t border-white/20 pt-8">
                <div class="sm:col-span-2 md:col-span-1">
                    <h4 class="font-semibold text-white mb-2">PixelShrink</h4>
                    <p class="text-sm text-gray-300">The fastest and most secure way to compress your images. All processing happens in your browser.</p>
                </div>
                <div>
                    <h4 class="font-semibold text-white mb-2">Features</h4>
                    <ul class="text-sm text-gray-300 space-y-1">
                        <li>Batch compression</li>
                        <li>Quality control</li>
                        <li>Privacy focused</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-white mb-2">Formats</h4>
                    <ul class="text-sm text-gray-300 space-y-1">
                        <li>JPEG / JPG</li>
                        <li>PNG</li>
                        <li>WebP</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-white mb-2">Security</h4>
                    <p class="text-sm text-gray-300">‚úÖ 100% Private</p>
                    <p class="text-sm text-gray-300">‚ùå No uploads to servers</p>
                </div>
            </div>
            <p class="mt-8 text-sm text-center text-gray-400">&copy; 2025 PixelShrink. All rights reserved.</p>
        </div>
    </div>
</footer>

    <template id="image-item-template">
        <div class="list-item-enter p-3 rounded-lg flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 glass">
            <div class="flex items-center gap-3 flex-grow w-full min-w-0">
                <div class="flex-shrink-0 w-12 h-12 bg-gray-800 rounded-md overflow-hidden">
                    <img class="thumbnail w-full h-full object-cover" src="" alt="Thumbnail">
                </div>
                <div class="flex-grow min-w-0">
                    <p class="font-semibold text-white truncate filename">filename.jpg</p>
                    <div class="flex flex-wrap items-center gap-x-2 gap-y-1 text-sm">
                        <span class="original-size text-gray-400">-- KB</span>
                        <span class="text-gray-500">‚Üí</span>
                        <span class="compressed-size font-medium text-green-400">-- KB</span>
                        <span class="savings-percent font-bold text-green-400">(-0%)</span>
                    </div>
                </div>
            </div>
            <div class="flex-shrink-0 flex items-center justify-end w-full sm:w-auto mt-2 sm:mt-0">
                 <div class="status-indicator w-full sm:w-28 flex flex-col items-center justify-center gap-1">
                    <div class="progress-bar-bg"><div class="progress-bar-fill"></div></div>
                    <span class="text-xs text-gray-400 progress-text">Compressing...</span>
                 </div>
                 <a href="#" class="download-link hidden w-full sm:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-3 rounded-lg text-xs transition text-center active:scale-95">Download</a>
            </div>
        </div>
    </template>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        particlesJS('particles-js', {
          "particles": {
            "number": { "value": 100, "density": { "enable": true, "value_area": 800 } },
            "color": { "value": "#ffffff" },
            "shape": { "type": ["circle", "triangle", "edge"], "stroke": { "width": 0, "color": "#000000" } },
            "opacity": { "value": 0.5, "random": true, "anim": { "enable": true, "speed": 1, "opacity_min": 0.1, "sync": false } },
            "size": { "value": 3, "random": true },
            "line_linked": { "enable": true, "distance": 150, "color": "#ffffff", "opacity": 0.4, "width": 1 },
            "move": { "enable": true, "speed": 4, "direction": "none", "random": true, "straight": false, "out_mode": "out", "bounce": false }
          },
          "interactivity": {
            "detect_on": "canvas",
            "events": { "onhover": { "enable": true, "mode": "grab" }, "onclick": { "enable": true, "mode": "push" }, "resize": true },
            "modes": { "grab": { "distance": 140, "line_linked": { "opacity": 1 } }, "push": { "particles_nb": 4 } }
          },
          "retina_detect": true
        });

        const uiElementsToAnimate = document.querySelectorAll('.initial-hidden');
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('file-input');
        const fileInputAdd = document.getElementById('file-input-add');
        const uploadContainer = document.getElementById('upload-container');
        const resultContainer = document.getElementById('result-container');
        const imageList = document.getElementById('image-list');
        const imageItemTemplate = document.getElementById('image-item-template');
        const errorMessage = document.getElementById('error-message');
        const downloadAllBtn = document.getElementById('download-all-btn');
        const startOverBtn = document.getElementById('start-over-btn');
        const contactForm = document.getElementById('contact-form');
        const formNotification = document.getElementById('form-notification');

        let compressedFiles = new Map();
        let fileCounter = 0;

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-in');
                    observer.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.1
        });
        uiElementsToAnimate.forEach(el => observer.observe(el));

        dropZone.addEventListener('click', () => fileInput.click());
        dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('drag-over'); });
        dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-over'));
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('drag-over');
            handleFiles(e.dataTransfer.files);
        });
        fileInput.addEventListener('change', (e) => handleFiles(e.target.files));
        fileInputAdd.addEventListener('change', (e) => handleFiles(e.target.files));
        startOverBtn.addEventListener('click', resetUI);
        downloadAllBtn.addEventListener('click', downloadAllFiles);
        
        if (contactForm) {
            contactForm.addEventListener('submit', handleFormSubmit);
        }

        function showNotification(message, isError = false) {
            formNotification.textContent = message;
            formNotification.className = `text-center p-4 rounded-md mb-4 font-medium ${isError ? 'bg-red-500/20 text-red-300' : 'bg-green-500/20 text-green-300'}`;
        }

        async function handleFormSubmit(e) {
            e.preventDefault();
            const form = e.target;
            const button = form.querySelector('button[type="submit"]');
            const originalButtonText = button.textContent;
            button.textContent = 'Submitting...';
            button.disabled = true;

            const formData = new FormData(form);
            const formObject = Object.fromEntries(formData.entries());

            try {
                const response = await fetch(form.action, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                    body: JSON.stringify(formObject)
                });

                if (response.ok) {
                    showNotification('Message sent successfully!', false);
                    form.reset();
                } else {
                    const data = await response.json().catch(() => ({}));
                    const message = data.message || 'Something went wrong. Please try again.';
                    showNotification(message, true);
                }
            } catch (error) {
                console.error(error);
                showNotification('Network error. Please check your connection.', true);
            } finally {
                button.textContent = originalButtonText;
                button.disabled = false;
            }
        }


        function handleFiles(files) {
            if (!files || files.length === 0) return;
            if (resultContainer.classList.contains('hidden')) {
                uploadContainer.classList.add('hidden');
                resultContainer.classList.remove('hidden');
            }
            hideError();
            const validFiles = Array.from(files).filter(file => {
                if (!file.type.startsWith('image/')) {
                    showError(`File "${file.name}" is not a valid image and was skipped.`);
                    return false;
                }
                return true;
            });
            validFiles.forEach(file => {
                const fileId = `file-${fileCounter++}`;
                addFileToList(file, fileId);
                compressFile(file, fileId);
            });
            fileInput.value = '';
            fileInputAdd.value = '';
        }

        function addFileToList(file, fileId) {
            const templateClone = imageItemTemplate.content.cloneNode(true);
            const imageItem = templateClone.querySelector('.list-item-enter');
            imageItem.id = fileId;
            imageItem.querySelector('.filename').textContent = file.name;
            imageItem.querySelector('.original-size').textContent = formatBytes(file.size);
            const thumb = imageItem.querySelector('.thumbnail');
            const reader = new FileReader();
            reader.onload = e => thumb.src = e.target.result;
            reader.readAsDataURL(file);
            imageList.appendChild(imageItem);
            requestAnimationFrame(() => {
                imageItem.classList.add('list-item-enter-active');
            });
        }
        
        function updateProgress(fileId, progress) {
            const item = document.getElementById(fileId);
            if (!item) return;
            const progressBar = item.querySelector('.progress-bar-fill');
            const progressText = item.querySelector('.progress-text');
            progressBar.style.width = `${progress}%`;
            if (progress < 100) {
                progressText.textContent = `Compressing... ${Math.round(progress)}%`;
            } else {
                 progressText.textContent = `Done!`;
            }
        }

        async function compressFile(file, fileId) {
            const options = {
                maxSizeMB: 2,
                useWebWorker: true,
                quality: 0.8,
                onProgress: (progress) => updateProgress(fileId, progress),
            };
            try {
                const compressed = await imageCompression(file, options);
                compressedFiles.set(fileId, { name: `shrunk_${file.name}`, blob: compressed });
                updateFileInList(fileId, file, compressed);
            } catch (error) {
                console.error(`Compression failed for ${file.name}:`, error);
                updateFileInList(fileId, file, null, `Error: Compression failed`);
            }
        }

        function updateFileInList(fileId, original, compressed, error = null) {
            const item = document.getElementById(fileId);
            if (!item) return;
            const statusIndicator = item.querySelector('.status-indicator');
            const downloadLink = item.querySelector('.download-link');
            if (error) {
                statusIndicator.innerHTML = `<span class="text-xs text-red-400 font-medium">${error}</span>`;
            } else {
                const savings = 100 - (compressed.size / original.size) * 100;
                item.querySelector('.compressed-size').textContent = formatBytes(compressed.size);
                item.querySelector('.savings-percent').textContent = `(${savings.toFixed(0)}% smaller)`;
                if (downloadLink.href && downloadLink.href.startsWith('blob:')) {
                    URL.revokeObjectURL(downloadLink.href);
                }
                downloadLink.href = URL.createObjectURL(compressed);
                downloadLink.download = `shrunk_${original.name}`;
                statusIndicator.classList.add('hidden');
                downloadLink.classList.remove('hidden');
            }
            checkDownloadAllState();
        }

        function downloadAllFiles() {
            const zip = new JSZip();
            let downloadableFiles = 0;
            compressedFiles.forEach(file => {
                if (file.blob) {
                    zip.file(file.name, file.blob);
                    downloadableFiles++;
                }
            });
            if (downloadableFiles > 0) {
                zip.generateAsync({type:"blob"}).then((content) => {
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(content);
                    link.download = "PixelShrink_Images.zip";
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(link.href);
                });
            }
        }

        function checkDownloadAllState() {
            let readyFiles = 0;
            compressedFiles.forEach(file => { if (file.blob) readyFiles++; });
            downloadAllBtn.disabled = readyFiles === 0;
        }

        function resetUI() {
            uploadContainer.classList.remove('hidden');
            resultContainer.classList.add('hidden');
            compressedFiles.forEach((file, fileId) => {
                 const item = document.getElementById(fileId);
                 if (item) {
                    const link = item.querySelector('.download-link');
                    if (link && link.href.startsWith('blob:')) URL.revokeObjectURL(link.href);
                 }
            });
            imageList.innerHTML = '';
            fileInput.value = '';
            fileInputAdd.value = '';
            compressedFiles.clear();
            fileCounter = 0;
            checkDownloadAllState();
            hideError();
        }

        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.classList.remove('hidden');
            errorMessage.style.opacity = '1'; 
            setTimeout(() => {
                 hideError();
            }, 5000);
        }

        function hideError() {
            errorMessage.style.opacity = '0';
            setTimeout(() => errorMessage.classList.add('hidden'), 300);
        }

        function formatBytes(bytes, decimals = 2) {
            if (!+bytes) return '0 Bytes';
            const k = 1024;
            const dm = decimals < 0 ? 0 : decimals;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;
        }
    });
    </script>
</body>
</html>
